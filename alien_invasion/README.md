# 外星人入侵 (Alien Invasion) - 进阶版

这是一个基于 Python 和 Pygame 开发的经典 2D 竖版射击游戏。在原版《Python编程：从入门到实践》项目的基础上，增加了外星人反击、音效系统和最高分存档等进阶功能。

##  游戏简介

玩家控制一艘飞船在屏幕底部移动，通过发射子弹消灭不断下压的外星人舰队。外星人不再是单纯的靶子，它们会随机发射子弹进行反击。玩家需要躲避攻击，同时尽可能获得高分。

##  功能特性

### 核心玩法
* **飞船控制**：使用键盘左右移动飞船，空格键发射子弹。
* **外星人AI**：外星人舰队会整体左右移动并向下逼近。
* **外星人反击** *[新增]*：外星人会随机向下方发射红色子弹，且带有一定的散射角度。
* **关卡升级**：消灭整群外星人后，游戏节奏加快（飞船、子弹、外星人速度提升），进入下一关。

###  计分系统
* **实时计分**：击杀外星人获得分数。
* **最高分存档** *[新增]*：游戏最高分会自动保存到本地文件（`highscore.txt` ），关闭游戏后不会丢失。
* **信息显示**：屏幕上方实时显示当前剩余生命数、最高分、得分和当前等级（从左到右）。

###  视听体验
* **背景音乐** *[新增]*：游戏过程中循环播放背景音乐 (BGM)。
* **音效反馈** *[新增]*：包含射击音效和爆炸音效。
* **UI交互**：包含“Play”按钮，游戏开始前和结束后可见。

##  环境依赖

* Python 3.x
* pygame

### 安装依赖库

```bash
pip install pygame
````

##  如何运行

1.  确保你已安装 Python 和 Pygame。
2.  准备好游戏资源文件（见下文“文件结构”），确保 `images` 文件夹内有图片，`sounds` 文件夹内有音频文件。
3.  在终端或命令行中运行主程序：

<!-- end list -->

```bash
python main.py
```

##  操作说明

| 按键 | 功能 |
| :--- | :--- |
| **⬅️ 左箭头** / **➡️ 右箭头** | 左右移动飞船 |
| **␣ 空格键 (Space)** | 发射子弹 |
| **Q 键** | 退出游戏（同时保存最高分） |
| **Play 按钮** | 鼠标点击开始新游戏 |

## 文件结构说明

```text
alien_invasion/
│
├── main.py                [主程序] 游戏入口，负责初始化、游戏循环和事件管理
├── settings.py            [设置] 存储屏幕、飞船、子弹、外星人等所有参数
├── game_stats.py          [数据] 跟踪游戏统计信息（分数、最高分、等级）
├── scoreboard.py          [UI] 负责在屏幕上绘制得分、等级和飞船图标
├── button.py              [UI] Play 按钮类
│
├── ship.py                [角色] 玩家飞船类
├── bullet.py              [角色] 玩家子弹类
├── alien.py               [角色] 外星人类
├── alien_bullet.py        [角色] 外星人子弹类 (新增)
│
├── images/                [资源] 图片资源目录
│   ├── ship.bmp           飞船图片
│   └── alien.bmp          外星人图片
│
├── sounds/                [资源] 音频资源目录
│   ├── BGM.mp3            背景音乐
│   ├── BGM2.mp3           替换用背景音乐
│   ├── BGM3.mp3           替换用背景音乐
│   ├── shoot.wav          射击音效
│   └── explosion.wav      爆炸音效
│
└── highscore.txt          [自动生成] 用于存储最高分的文件
```

##  备注与难度调整

**资源替换**：如果你想更换游戏外观或声音，只需替换 `images` 和 `sounds` 文件夹下的同名文件即可。（`sounds` 中提供了几首替换的BGM，但暂未完成游戏中的BGM替换功能）

#### 注意：
BGM为作者使用sunoAI，基于已有音乐生成的，仅作为示例使用，请不要用于商用

如果您觉得游戏太难或太简单，可以直接修改 `settings.py` 中的参数。以下是所有影响游戏难度的关键设置：

### 1\. 核心难度参数 (静态设置)

> 在 `Settings.__init__` 方法中修改：

  * **`self.ship_limit`** (飞船生命数)
      * 默认值：`3`
      * **说明**：玩家可用的生命数量。增加此数值可以让游戏更“宽容”。
  * **`self.bullets_allowed`** (玩家最大子弹数)
      * 默认值：`10`
      * **说明**：屏幕上允许同时存在的玩家子弹数量。数值越小，玩家射击受限越大，容错率越低。
  * **`self.fleet_drop_speed`** (外星人下落速度)
      * 默认值：`10`
      * **说明**：外星人撞到屏幕边缘后向下移动的距离。数值越大，外星人逼近底部的速度越快，留给玩家的时间越少。
  * **`self.speedup_scale`** (节奏加快比例)
      * 默认值：`1.1`
      * **说明**：每清空一群外星人进入下一关时，游戏速度（飞船、子弹、外星人）的增长倍率。数值越大，后期难度飙升越快。

### 2\. 速度参数 (动态初始值)

> 在 `Settings.initialize_dynamic_settings` 方法中修改（这些值会随关卡升级而自动变大）：

  * **`self.alien_fire_probability`** (外星人开火概率)
      * 默认值：`0.04` (即 4%)
      * **说明**：这是影响难度的最直接因素。数值越大，满屏子弹越多，难度越高。建议范围 `0.01` - `0.1`。
  * **`self.alien_speed`** (外星人移动速度)
      * 默认值：`1.0`
      * **说明**：外星人水平移动的速度。速度越快，越难瞄准。
  * **`self.alien_bullet_speed`** (外星人子弹速度)
      * 默认值：`2.0`
      * **说明**：敌人子弹飞行的速度。速度越快，玩家反应时间越短。
  * **`self.ship_speed`** (玩家飞船速度)
      * 默认值：`4.0`
      * **说明**：玩家移动速度。适当提高可以让躲避更灵活，但过快可能导致操作失误。
  * **`self.bullet_speed`** (玩家子弹速度)
      * 默认值：`3.0`
      * **说明**：玩家子弹飞行速度。速度越快，越容易击中移动中的外星人。

-----

*修改完成后，请保存文件并重新运行 `main.py` 即可生效。*